{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./examples/test.js","webpack:///./node_modules/selector-set/selector-set.next.js","webpack:///./src/e.js"],"names":["btn","document","getElementById","btn2","btn4","E","e","Foo","off","onceHandler","bindAll","on","offHandler","delegate","triggerHandler","listener","triggerBus","removeBus","console","log","target","emit","bar","init","matches","type","i","length","data","context","methods","undefined","Object","getOwnPropertyNames","getPrototypeOf","bind","event","el","callback","push","nodeType","addEventListener","map","name","SelectorSet","add","splice","remove","size","removeEventListener","querySelectorAll","dispatchEvent","CustomEvent","bubbles","cancelable","detail","window","params","evt","createEvent","initCustomEvent"],"mappings":"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CA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,WAAW;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU,eAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,4BAA4B;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,4BAA4B;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,yBAAyB;AAC9C;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;;AAEA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","file":"/examples/test.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","import e from '../src/e'\r\n\r\nconst btn = document.getElementById('btn')\r\nconst btn2 = document.getElementById('btn2')\r\nconst btn4 = document.getElementById('btn4')\r\n\r\nconst E = new e\r\n\r\nclass Foo {\r\n\r\n    static bar = 'foobar'\r\n\r\n    init() {\r\n        E.bindAll(this)\r\n        E.on('click', btn, this.onceHandler)\r\n        E.on('click', btn2, this.offHandler)\r\n        E.delegate('click','#btn3', this.onceHandler)\r\n        E.on('click', btn4, this.triggerHandler)\r\n\r\n        E.on('click', 'div .deep', this.onceHandler)\r\n\r\n        // Event bus example\r\n        E.on('event.bus.event', this.listener)\r\n        E.on('click', '#bus-test', this.triggerBus)\r\n        E.on('click', '#bus-off', this.removeBus)\r\n    }\r\n\r\n    onceHandler(e) {\r\n        console.log('foobar', e.target)\r\n    }\r\n\r\n    triggerHandler(e) {\r\n        E.emit('click', btn)\r\n    }\r\n\r\n    triggerBus() {\r\n        console.log('triggering event.bus.event event')\r\n        E.emit('event.bus.event')\r\n    }\r\n\r\n    removeBus() {\r\n        E.off('event.bus.event', this.listener)\r\n\r\n    }\r\n\r\n    listener() {\r\n        console.log('Triggered via the event bus!')\r\n    }\r\n\r\n    offHandler = () => {\r\n        E.off('click', btn, this.onceHandler)\r\n        E.off('click', '#btn3', this.onceHandler)\r\n    }\r\n}\r\n\r\nlet bar = new Foo()\r\nbar.init()\r\n\r\n\r\n","// Public: Create a new SelectorSet.\nexport default function SelectorSet() {\n  // Construct new SelectorSet if called as a function.\n  if (!(this instanceof SelectorSet)) {\n    return new SelectorSet();\n  }\n\n  // Public: Number of selectors added to the set\n  this.size = 0;\n\n  // Internal: Incrementing ID counter\n  this.uid = 0;\n\n  // Internal: Array of String selectors in the set\n  this.selectors = [];\n\n  // Internal: All Object index String names mapping to Index objects.\n  this.indexes = Object.create(this.indexes);\n\n  // Internal: Used Object index String names mapping to Index objects.\n  this.activeIndexes = [];\n}\n\n// Detect prefixed Element#matches function.\nvar docElem = window.document.documentElement;\nvar matches = (docElem.matches ||\n                docElem.webkitMatchesSelector ||\n                docElem.mozMatchesSelector ||\n                docElem.oMatchesSelector ||\n                docElem.msMatchesSelector);\n\n// Public: Check if element matches selector.\n//\n// Maybe overridden with custom Element.matches function.\n//\n// el       - An Element\n// selector - String CSS selector\n//\n// Returns true or false.\nSelectorSet.prototype.matchesSelector = function(el, selector) {\n  return matches.call(el, selector);\n};\n\n// Public: Find all elements in the context that match the selector.\n//\n// Maybe overridden with custom querySelectorAll function.\n//\n// selectors - String CSS selectors.\n// context   - Element context\n//\n// Returns non-live list of Elements.\nSelectorSet.prototype.querySelectorAll = function(selectors, context) {\n  return context.querySelectorAll(selectors);\n};\n\n\n// Public: Array of indexes.\n//\n// name     - Unique String name\n// selector - Function that takes a String selector and returns a String key\n//            or undefined if it can't be used by the index.\n// element  - Function that takes an Element and returns an Array of String\n//            keys that point to indexed values.\n//\nSelectorSet.prototype.indexes = [];\n\n// Index by element id\nvar idRe = /^#((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/g;\nSelectorSet.prototype.indexes.push({\n  name: 'ID',\n  selector: function matchIdSelector(sel) {\n    var m;\n    if (m = sel.match(idRe)) {\n      return m[0].slice(1);\n    }\n  },\n  element: function getElementId(el) {\n    if (el.id) {\n      return [el.id];\n    }\n  }\n});\n\n// Index by all of its class names\nvar classRe = /^\\.((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/g;\nSelectorSet.prototype.indexes.push({\n  name: 'CLASS',\n  selector: function matchClassSelector(sel) {\n    var m;\n    if (m = sel.match(classRe)) {\n      return m[0].slice(1);\n    }\n  },\n  element: function getElementClassNames(el) {\n    var className = el.className;\n    if (className) {\n      if (typeof className === 'string') {\n        return className.split(/\\s/);\n      } else if (typeof className === 'object' && 'baseVal' in className) {\n        // className is a SVGAnimatedString\n        // global SVGAnimatedString is not an exposed global in Opera 12\n        return className.baseVal.split(/\\s/);\n      }\n    }\n  }\n});\n\n// Index by tag/node name: `DIV`, `FORM`, `A`\nvar tagRe = /^((?:[\\w\\u00c0-\\uFFFF\\-]|\\\\.)+)/g;\nSelectorSet.prototype.indexes.push({\n  name: 'TAG',\n  selector: function matchTagSelector(sel) {\n    var m;\n    if (m = sel.match(tagRe)) {\n      return m[0].toUpperCase();\n    }\n  },\n  element: function getElementTagName(el) {\n    return [el.nodeName.toUpperCase()];\n  }\n});\n\n// Default index just contains a single array of elements.\nSelectorSet.prototype.indexes['default'] = {\n  name: 'UNIVERSAL',\n  selector: function() {\n    return true;\n  },\n  element: function() {\n    return [true];\n  }\n};\n\n\n// Use ES Maps when supported\nvar Map;\nif (typeof window.Map === 'function') {\n  Map = window.Map;\n} else {\n  Map = (function() {\n    function Map() {\n      this.map = {};\n    }\n    Map.prototype.get = function(key) {\n      return this.map[key + ' '];\n    };\n    Map.prototype.set = function(key, value) {\n      this.map[key + ' '] = value;\n    };\n    return Map;\n  })();\n}\n\n\n// Regexps adopted from Sizzle\n//   https://github.com/jquery/sizzle/blob/1.7/sizzle.js\n//\nvar chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g;\n\n// Internal: Get indexes for selector.\n//\n// selector - String CSS selector\n//\n// Returns Array of {index, key}.\nfunction parseSelectorIndexes(allIndexes, selector) {\n  allIndexes = allIndexes.slice(0).concat(allIndexes['default']);\n\n  var allIndexesLen = allIndexes.length,\n      i, j, m, dup, rest = selector,\n      key, index, indexes = [];\n\n  do {\n    chunker.exec('');\n    if (m = chunker.exec(rest)) {\n      rest = m[3];\n      if (m[2] || !rest) {\n        for (i = 0; i < allIndexesLen; i++) {\n          index = allIndexes[i];\n          if (key = index.selector(m[1])) {\n            j = indexes.length;\n            dup = false;\n            while (j--) {\n              if (indexes[j].index === index && indexes[j].key === key) {\n                dup = true;\n                break;\n              }\n            }\n            if (!dup) {\n              indexes.push({index: index, key: key});\n            }\n            break;\n          }\n        }\n      }\n    }\n  } while (m);\n\n  return indexes;\n}\n\n// Internal: Find first item in Array that is a prototype of `proto`.\n//\n// ary   - Array of objects\n// proto - Prototype of expected item in `ary`\n//\n// Returns object from `ary` if found. Otherwise returns undefined.\nfunction findByPrototype(ary, proto) {\n  var i, len, item;\n  for (i = 0, len = ary.length; i < len; i++) {\n    item = ary[i];\n    if (proto.isPrototypeOf(item)) {\n      return item;\n    }\n  }\n}\n\n// Public: Log when added selector falls under the default index.\n//\n// This API should not be considered stable. May change between\n// minor versions.\n//\n// obj - {selector, data} Object\n//\n//   SelectorSet.prototype.logDefaultIndexUsed = function(obj) {\n//     console.warn(obj.selector, \"could not be indexed\");\n//   };\n//\n// Returns nothing.\nSelectorSet.prototype.logDefaultIndexUsed = function() {};\n\n// Public: Add selector to set.\n//\n// selector - String CSS selector\n// data     - Optional data Object (default: undefined)\n//\n// Returns nothing.\nSelectorSet.prototype.add = function(selector, data) {\n  var obj, i, indexProto, key, index, objs,\n      selectorIndexes, selectorIndex,\n      indexes = this.activeIndexes,\n      selectors = this.selectors;\n\n  if (typeof selector !== 'string') {\n    return;\n  }\n\n  obj = {\n    id: this.uid++,\n    selector: selector,\n    data: data\n  };\n\n  selectorIndexes = parseSelectorIndexes(this.indexes, selector);\n  for (i = 0; i < selectorIndexes.length; i++) {\n    selectorIndex = selectorIndexes[i];\n    key = selectorIndex.key;\n    indexProto = selectorIndex.index;\n\n    index = findByPrototype(indexes, indexProto);\n    if (!index) {\n      index = Object.create(indexProto);\n      index.map = new Map();\n      indexes.push(index);\n    }\n\n    if (indexProto === this.indexes['default']) {\n      this.logDefaultIndexUsed(obj);\n    }\n    objs = index.map.get(key);\n    if (!objs) {\n      objs = [];\n      index.map.set(key, objs);\n    }\n    objs.push(obj);\n  }\n\n  this.size++;\n  selectors.push(selector);\n};\n\n// Public: Remove selector from set.\n//\n// selector - String CSS selector\n// data     - Optional data Object (default: undefined)\n//\n// Returns nothing.\nSelectorSet.prototype.remove = function(selector, data) {\n  if (typeof selector !== 'string') {\n    return;\n  }\n\n  var selectorIndexes, selectorIndex, i, j, k, selIndex, objs, obj;\n  var indexes = this.activeIndexes;\n  var removedIds = {};\n  var removeAll = arguments.length === 1;\n\n  selectorIndexes = parseSelectorIndexes(this.indexes, selector);\n  for (i = 0; i < selectorIndexes.length; i++) {\n    selectorIndex = selectorIndexes[i];\n\n    j = indexes.length;\n    while (j--) {\n      selIndex = indexes[j];\n      if (selectorIndex.index.isPrototypeOf(selIndex)) {\n        objs = selIndex.map.get(selectorIndex.key);\n        if (objs) {\n          k = objs.length;\n          while (k--) {\n            obj = objs[k];\n            if (obj.selector === selector && (removeAll || obj.data === data)) {\n              objs.splice(k, 1);\n              removedIds[obj.id] = true;\n            }\n          }\n        }\n        break;\n      }\n    }\n  }\n\n  this.size -= Object.keys(removedIds).length;\n};\n\n// Sort by id property handler.\n//\n// a - Selector obj.\n// b - Selector obj.\n//\n// Returns Number.\nfunction sortById(a, b) {\n  return a.id - b.id;\n}\n\n// Public: Find all matching decendants of the context element.\n//\n// context - An Element\n//\n// Returns Array of {selector, data, elements} matches.\nSelectorSet.prototype.queryAll = function(context) {\n  if (!this.selectors.length) {\n    return [];\n  }\n\n  var matches = {}, results = [];\n  var els = this.querySelectorAll(this.selectors.join(', '), context);\n\n  var i, j, len, len2, el, m, match, obj;\n  for (i = 0, len = els.length; i < len; i++) {\n    el = els[i];\n    m = this.matches(el);\n    for (j = 0, len2 = m.length; j < len2; j++) {\n      obj = m[j];\n      if (!matches[obj.id]) {\n        match = {\n          id: obj.id,\n          selector: obj.selector,\n          data: obj.data,\n          elements: []\n        };\n        matches[obj.id] = match;\n        results.push(match);\n      } else {\n        match = matches[obj.id];\n      }\n      match.elements.push(el);\n    }\n  }\n\n  return results.sort(sortById);\n};\n\n// Public: Match element against all selectors in set.\n//\n// el - An Element\n//\n// Returns Array of {selector, data} matches.\nSelectorSet.prototype.matches = function(el) {\n  if (!el) {\n    return [];\n  }\n\n  var i, j, k, len, len2, len3, index, keys, objs, obj, id;\n  var indexes = this.activeIndexes, matchedIds = {}, matches = [];\n\n  for (i = 0, len = indexes.length; i < len; i++) {\n    index = indexes[i];\n    keys = index.element(el);\n    if (keys) {\n      for (j = 0, len2 = keys.length; j < len2; j++) {\n        if (objs = index.map.get(keys[j])) {\n          for (k = 0, len3 = objs.length; k < len3; k++) {\n            obj = objs[k];\n            id = obj.id;\n            if (!matchedIds[id] && this.matchesSelector(el, obj.selector)) {\n              matchedIds[id] = true;\n              matches.push(obj);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return matches.sort(sortById);\n};\n","import SelectorSet from 'selector-set'\r\n\r\nexport default class e {\r\n\r\n    /**\r\n     * Holds the SelectorSets for each event type\r\n     * @type {{}}\r\n     */\r\n    #eventTypes = {}\r\n\r\n    /**\r\n     * Holds Bus event stacks\r\n     * @type {{}}\r\n     */\r\n    #listeners = {}\r\n\r\n    /**\r\n     * Boot it up, Baby\r\n     */\r\n    constructor() {\r\n        this.#polyfill()\r\n    }\r\n\r\n    /**\r\n     * Binds all provided methods to a provided context.\r\n     *\r\n     * @param {object} context\r\n     * @param {array} methods Optional.\r\n     */\r\n    bindAll(context, methods) {\r\n        if (methods === undefined) {\r\n            methods = Object.getOwnPropertyNames(Object.getPrototypeOf(context))\r\n        }\r\n\r\n        for (let i = 0; i < methods.length; i++) {\r\n            context[methods[i]] = context[methods[i]].bind(context)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Bind event to a string, NodeList, or element.\r\n     *\r\n     * @param {string} event\r\n     * @param {string|NodeList|HTMLElement} el\r\n     * @param {*} [callback]\r\n     */\r\n    on(event, el, callback) {\r\n        if (typeof el === 'function' && callback === undefined) {\r\n            this.#makeBusStack(event)\r\n            this.#listeners[event].push(el)\r\n            return\r\n        }\r\n\r\n        if (el.nodeType && el.nodeType === 1) {\r\n            el.addEventListener(event, callback)\r\n            return\r\n        }\r\n\r\n        el = this.#maybeRunQuerySelector(el)\r\n\r\n        for (let i = 0; i < el.length; i++) {\r\n            el[i].addEventListener(event, callback)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add a delegated event.\r\n     *\r\n     * @param {string} event\r\n     * @param {string|NodeList|HTMLElement} delegate\r\n     * @param {*} [callback]\r\n     */\r\n    delegate(event, delegate, callback) {\r\n        let map = this.#eventTypes[name]\r\n\r\n        if (map === undefined) {\r\n            map = new SelectorSet()\r\n            this.#eventTypes[event] = map\r\n            document.addEventListener(event, this.#handleDelegation)\r\n        }\r\n\r\n        map.add(delegate, callback)\r\n    }\r\n\r\n    /**\r\n     * Remove a callback from a DOM element, or one or all Bus events.\r\n     *\r\n     * @param {string} event\r\n     * @param {string|NodeList|HTMLElement|Undefined} [el]\r\n     * @param {*} [callback]\r\n     */\r\n    off(event, el, callback) {\r\n        const map = this.#eventTypes[event]\r\n\r\n        if (el === undefined) {\r\n            this.#listeners[event] = []\r\n            return\r\n        }\r\n\r\n        if (typeof el === 'function') {\r\n            this.#makeBusStack(event)\r\n\r\n            for (let i = 0; i < this.#listeners[event].length; i++) {\r\n                if (this.#listeners[event][i] === el) {\r\n                    this.#listeners[event].splice(i, 1)\r\n                }\r\n            }\r\n            return\r\n        }\r\n\r\n        if (map !== undefined) {\r\n            map.remove(el, callback)\r\n\r\n            if (map.size === 0) {\r\n                delete this.#eventTypes[event]\r\n                document.removeEventListener(event, this.#handleDelegation)\r\n                return\r\n            }\r\n        }\r\n\r\n        if (el.removeEventListener !== undefined) {\r\n            el.removeEventListener(event, callback)\r\n            return\r\n        }\r\n\r\n        el = this.#maybeRunQuerySelector(el)\r\n\r\n        for (let i = 0; i < el.length; i++) {\r\n            el[i].removeEventListener(event, callback)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Emit a DOM or Bus event.\r\n     *\r\n     * @param {string} event\r\n     * @param {string|NodeList|HTMLElement|Undefined} [el]\r\n     */\r\n    emit(event, el) {\r\n        if (el === undefined) {\r\n            this.triggerBus(event)\r\n            return\r\n        }\r\n\r\n        if (el.nodeType && el.nodeType === 1) {\r\n            this.#triggerEvent(event, el)\r\n            return\r\n        }\r\n\r\n        el = this.#maybeRunQuerySelector(el)\r\n\r\n        for (let i = 0; i < el.length; i++) {\r\n            this.#triggerEvent(event, el[i])\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Trigger a bus stack.\r\n     *\r\n     * @param {string} event\r\n     */\r\n    triggerBus(event) {\r\n        if (this.#listeners[event]) {\r\n            for (let i = 0; i < this.#listeners[event].length; i++) {\r\n                this.#listeners[event][i]()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Maybe run querySelectorAll if input is a string.\r\n     *\r\n     * @param {HTMLElement|string} el\r\n     * @returns {NodeListOf<Element>}\r\n     */\r\n    #maybeRunQuerySelector(el) {\r\n        return typeof el === 'string' ? document.querySelectorAll(el) : el\r\n    }\r\n\r\n    /**\r\n     * Make a bus stack if not already created.\r\n     *\r\n     * @param {string} event\r\n     */\r\n    #makeBusStack(event) {\r\n        if (this.#listeners[event] === undefined) {\r\n            this.#listeners[event] = []\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle delegated events\r\n     *\r\n     * @param {Event} e\r\n     */\r\n    #handleDelegation = e => {\r\n        const matches = this.#eventTypes[e.type].matches(e.target)\r\n\r\n        for (let i = 0; i < matches.length; i++) {\r\n            matches[i].data(e)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Fires an event programmatically\r\n     *\r\n     * @param {string} event\r\n     * @param {HTMLElement} el\r\n     * @returns {boolean}\r\n     */\r\n    #triggerEvent(event, el) {\r\n        return el.dispatchEvent(\r\n          new CustomEvent(event, {\r\n              bubbles: true,\r\n              cancelable: true,\r\n              detail: null\r\n          })\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Polyfill the CustomEvent constructor for IE11\r\n     */\r\n    #polyfill() {\r\n        if (typeof window.CustomEvent !== \"function\") {\r\n            window.CustomEvent = function (event, params) {\r\n                params = params || {bubbles: true, cancelable: true, detail: null}\r\n                let evt = document.createEvent('CustomEvent')\r\n                evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\r\n                return evt\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}